<!DOCTYPE html>
<html>
    <head>
        <title>Resonance Audio Player</title>
        <meta charset="UTF-8" />
        <link rel="stylesheet" type="text/css" media="all" href="osc-view.css"></link>
        <script src="node_modules/jquery/dist/jquery.js"></script>
        <script src="node_modules/osc/dist/osc-browser.min.js"></script>
        <script type="text/javascript">

            var port = new osc.WebSocketPort({
                url: "ws://localhost:8081"
            });

            port.on("message", function (oscMessage) {
                $("#message").text(JSON.stringify(oscMessage, undefined, 2));
                console.log("message", oscMessage);
            });

            port.open();

            var sayHello = function () {
                port.send({
                    address: "/hello",
                    args: ["world"]
                });
            };

        </script>
        <script src='player.js'></script>
        <link rel="stylesheet" type="text/css" media="all" href="player.css"></link>
    </head>

    <body>
        <h1>Gain-controlled looper</h1>

        <div id="resonancePlayer">
            <div id="playerControls">
                <button id='startContext' onClick='startAudio()'>START AUDIO CONTEXT</button><br>
                <button id='startAudio'>Play</button><button id='stopAudio'>Stop</button><br>
                <label for='masterGain'>Volume:</label><br><input type='range' min='-60' max='0' step='1' value='-10' class='slider' id='masterGain'>
            </div>
            <div id="mixerContainer">
                <table>
                    <tr id="mixerBox"></tr>
                </table>
            </div>
        </div>

        <br>
        <div id="messageArea">
            <p id="messageLabel">OSC Message:</p>
            <pre id="message"></pre>
        </div>

        <button onclick="sayHello()">Send OSC message</button>
    </body>
</html>
